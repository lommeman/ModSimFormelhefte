\section{State Space Formulations}

\subsection{Equation of Motion}
The equation of motion derived from Lagrangian mechanics is:
\[
W(q) \ddot{q} + \frac{\partial}{\partial q} (W(q) \dot{q}) \dot{q} - \frac{\partial L}{\partial q} = Q
\]


\subsection{Solving for Acceleration}
Isolate \(\ddot{q}\):
\[
\ddot{q} = W^{-1}(q) \left[ \frac{\partial L}{\partial q} + Q - \frac{\partial}{\partial q} (W(q) \dot{q}) \dot{q} \right]
\]

\subsection{Acceleration Form}
Define the state variables:
\[
x_1 = q, \quad x_2 = \dot{q}
\]
Express the equations of motion in state space form:
\[
\dot{x}_1 = x_2
\]
\[
\dot{x}_2 = W^{-1}(x_1) \left[ \frac{\partial L}{\partial x_1} + Q - \frac{\partial}{\partial x_1} (W(x_1) x_2) x_2 \right]
\]


% Generalized Momentum
\subsection{Generalized Momentum}
In Lagrangian mechanics, the generalized momentum \( p_i \) associated with the generalized coordinate \( q_i \) is defined as:
\[
\dot{\mathbf{p_i}} = \frac{\partial L}{\partial \dot{\mathbf{q}}_i} 
\]
where 
\[
\mathbf{p} = \mathbf{W}(\mathbf{q})\dot{\mathbf{q}}
\]
(mass time velocity) is the generalized momentum
\[
x_1 = q, \quad x_2 = p
\]
\subsection{Time Derivative of Generalized Momentum}
From the Euler-Lagrange equation:
\[
\frac{d}{dt} \left( \frac{\partial L}{\partial \dot{q}} \right) - \frac{\partial L}{\partial q} = Q
\]
we get:
\[
\dot{p} = \frac{\partial L}{\partial q} + Q
\]


\subsection{Relationship Between \(\dot{q}\) and \( p \)}
The generalized velocities \(\dot{q}\) can be expressed in terms of the generalized momentum \( p \):
\[
\dot{\mathbf{q}} = \mathbf{W^{-1}(q) p}
\]


\subsection{Momentum Form}
Express the equations of motion in state space form:
\[
\dot{x}_1 = \dot{q} = W^{-1}(x_1) x_2
\]
\[
\dot{x}_2 = \dot{p} = \frac{\partial L}{\partial x_1} + Q 
\]
